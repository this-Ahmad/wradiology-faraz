!function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";var i;n.r(e),n.d(e,"v1",(function(){return v})),n.d(e,"v3",(function(){return A})),n.d(e,"v4",(function(){return k})),n.d(e,"v5",(function(){return P})),n.d(e,"NIL",(function(){return I})),n.d(e,"version",(function(){return S})),n.d(e,"validate",(function(){return s})),n.d(e,"stringify",(function(){return f})),n.d(e,"parse",(function(){return g}));var a=new Uint8Array(16);function r(){if(!i&&!(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(a)}var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var s=function(t){return"string"==typeof t&&o.test(t)},d=[],u=0;u<256;++u)d.push((u+256).toString(16).substr(1));var c,h,f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(d[t[e+0]]+d[t[e+1]]+d[t[e+2]]+d[t[e+3]]+"-"+d[t[e+4]]+d[t[e+5]]+"-"+d[t[e+6]]+d[t[e+7]]+"-"+d[t[e+8]]+d[t[e+9]]+"-"+d[t[e+10]]+d[t[e+11]]+d[t[e+12]]+d[t[e+13]]+d[t[e+14]]+d[t[e+15]]).toLowerCase();if(!s(n))throw TypeError("Stringified UUID is invalid");return n},l=0,p=0;var v=function(t,e,n){var i=e&&n||0,a=e||new Array(16),o=(t=t||{}).node||c,s=void 0!==t.clockseq?t.clockseq:h;if(null==o||null==s){var d=t.random||(t.rng||r)();null==o&&(o=c=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==s&&(s=h=16383&(d[6]<<8|d[7]))}var u=void 0!==t.msecs?t.msecs:Date.now(),v=void 0!==t.nsecs?t.nsecs:p+1,g=u-l+(v-p)/1e4;if(g<0&&void 0===t.clockseq&&(s=s+1&16383),(g<0||u>l)&&void 0===t.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=u,p=v,h=s;var m=(1e4*(268435455&(u+=122192928e5))+v)%4294967296;a[i++]=m>>>24&255,a[i++]=m>>>16&255,a[i++]=m>>>8&255,a[i++]=255&m;var y=u/4294967296*1e4&268435455;a[i++]=y>>>8&255,a[i++]=255&y,a[i++]=y>>>24&15|16,a[i++]=y>>>16&255,a[i++]=s>>>8|128,a[i++]=255&s;for(var w=0;w<6;++w)a[i+w]=o[w];return e||f(a)};var g=function(t){if(!s(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=255&e,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=255&e,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=255&e,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=255&e,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=255&e,n};var m=function(t,e,n){function i(t,i,a,r){if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}(t)),"string"==typeof i&&(i=g(i)),16!==i.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var o=new Uint8Array(16+t.length);if(o.set(i),o.set(t,i.length),(o=n(o))[6]=15&o[6]|e,o[8]=63&o[8]|128,a){r=r||0;for(var s=0;s<16;++s)a[r+s]=o[s];return a}return f(o)}try{i.name=t}catch(t){}return i.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",i.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",i};function y(t){return 14+(t+64>>>9<<4)+1}function w(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function _(t,e,n,i,a,r){return w((o=w(w(e,t),w(i,r)))<<(s=a)|o>>>32-s,n);var o,s}function b(t,e,n,i,a,r,o){return _(e&n|~e&i,t,e,a,r,o)}function D(t,e,n,i,a,r,o){return _(e&i|n&~i,t,e,a,r,o)}function E(t,e,n,i,a,r,o){return _(e^n^i,t,e,a,r,o)}function x(t,e,n,i,a,r,o){return _(n^(e|~i),t,e,a,r,o)}var A=m("v3",48,(function(t){if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return function(t){for(var e=[],n=32*t.length,i=0;i<n;i+=8){var a=t[i>>5]>>>i%32&255,r=parseInt("0123456789abcdef".charAt(a>>>4&15)+"0123456789abcdef".charAt(15&a),16);e.push(r)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[y(e)-1]=e;for(var n=1732584193,i=-271733879,a=-1732584194,r=271733878,o=0;o<t.length;o+=16){var s=n,d=i,u=a,c=r;n=b(n,i,a,r,t[o],7,-680876936),r=b(r,n,i,a,t[o+1],12,-389564586),a=b(a,r,n,i,t[o+2],17,606105819),i=b(i,a,r,n,t[o+3],22,-1044525330),n=b(n,i,a,r,t[o+4],7,-176418897),r=b(r,n,i,a,t[o+5],12,1200080426),a=b(a,r,n,i,t[o+6],17,-1473231341),i=b(i,a,r,n,t[o+7],22,-45705983),n=b(n,i,a,r,t[o+8],7,1770035416),r=b(r,n,i,a,t[o+9],12,-1958414417),a=b(a,r,n,i,t[o+10],17,-42063),i=b(i,a,r,n,t[o+11],22,-1990404162),n=b(n,i,a,r,t[o+12],7,1804603682),r=b(r,n,i,a,t[o+13],12,-40341101),a=b(a,r,n,i,t[o+14],17,-1502002290),i=b(i,a,r,n,t[o+15],22,1236535329),n=D(n,i,a,r,t[o+1],5,-165796510),r=D(r,n,i,a,t[o+6],9,-1069501632),a=D(a,r,n,i,t[o+11],14,643717713),i=D(i,a,r,n,t[o],20,-373897302),n=D(n,i,a,r,t[o+5],5,-701558691),r=D(r,n,i,a,t[o+10],9,38016083),a=D(a,r,n,i,t[o+15],14,-660478335),i=D(i,a,r,n,t[o+4],20,-405537848),n=D(n,i,a,r,t[o+9],5,568446438),r=D(r,n,i,a,t[o+14],9,-1019803690),a=D(a,r,n,i,t[o+3],14,-187363961),i=D(i,a,r,n,t[o+8],20,1163531501),n=D(n,i,a,r,t[o+13],5,-1444681467),r=D(r,n,i,a,t[o+2],9,-51403784),a=D(a,r,n,i,t[o+7],14,1735328473),i=D(i,a,r,n,t[o+12],20,-1926607734),n=E(n,i,a,r,t[o+5],4,-378558),r=E(r,n,i,a,t[o+8],11,-2022574463),a=E(a,r,n,i,t[o+11],16,1839030562),i=E(i,a,r,n,t[o+14],23,-35309556),n=E(n,i,a,r,t[o+1],4,-1530992060),r=E(r,n,i,a,t[o+4],11,1272893353),a=E(a,r,n,i,t[o+7],16,-155497632),i=E(i,a,r,n,t[o+10],23,-1094730640),n=E(n,i,a,r,t[o+13],4,681279174),r=E(r,n,i,a,t[o],11,-358537222),a=E(a,r,n,i,t[o+3],16,-722521979),i=E(i,a,r,n,t[o+6],23,76029189),n=E(n,i,a,r,t[o+9],4,-640364487),r=E(r,n,i,a,t[o+12],11,-421815835),a=E(a,r,n,i,t[o+15],16,530742520),i=E(i,a,r,n,t[o+2],23,-995338651),n=x(n,i,a,r,t[o],6,-198630844),r=x(r,n,i,a,t[o+7],10,1126891415),a=x(a,r,n,i,t[o+14],15,-1416354905),i=x(i,a,r,n,t[o+5],21,-57434055),n=x(n,i,a,r,t[o+12],6,1700485571),r=x(r,n,i,a,t[o+3],10,-1894986606),a=x(a,r,n,i,t[o+10],15,-1051523),i=x(i,a,r,n,t[o+1],21,-2054922799),n=x(n,i,a,r,t[o+8],6,1873313359),r=x(r,n,i,a,t[o+15],10,-30611744),a=x(a,r,n,i,t[o+6],15,-1560198380),i=x(i,a,r,n,t[o+13],21,1309151649),n=x(n,i,a,r,t[o+4],6,-145523070),r=x(r,n,i,a,t[o+11],10,-1120210379),a=x(a,r,n,i,t[o+2],15,718787259),i=x(i,a,r,n,t[o+9],21,-343485551),n=w(n,s),i=w(i,d),a=w(a,u),r=w(r,c)}return[n,i,a,r]}(function(t){if(0===t.length)return[];for(var e=8*t.length,n=new Uint32Array(y(e)),i=0;i<e;i+=8)n[i>>5]|=(255&t[i/8])<<i%32;return n}(t),8*t.length))}));var k=function(t,e,n){var i=(t=t||{}).random||(t.rng||r)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(var a=0;a<16;++a)e[n+a]=i[a];return e}return f(i)};function O(t,e,n,i){switch(t){case 0:return e&n^~e&i;case 1:return e^n^i;case 2:return e&n^e&i^n&i;case 3:return e^n^i}}function C(t,e){return t<<e|t>>>32-e}var P=m("v5",80,(function(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var i=unescape(encodeURIComponent(t));t=[];for(var a=0;a<i.length;++a)t.push(i.charCodeAt(a))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var r=t.length/4+2,o=Math.ceil(r/16),s=new Array(o),d=0;d<o;++d){for(var u=new Uint32Array(16),c=0;c<16;++c)u[c]=t[64*d+4*c]<<24|t[64*d+4*c+1]<<16|t[64*d+4*c+2]<<8|t[64*d+4*c+3];s[d]=u}s[o-1][14]=8*(t.length-1)/Math.pow(2,32),s[o-1][14]=Math.floor(s[o-1][14]),s[o-1][15]=8*(t.length-1)&4294967295;for(var h=0;h<o;++h){for(var f=new Uint32Array(80),l=0;l<16;++l)f[l]=s[h][l];for(var p=16;p<80;++p)f[p]=C(f[p-3]^f[p-8]^f[p-14]^f[p-16],1);for(var v=n[0],g=n[1],m=n[2],y=n[3],w=n[4],_=0;_<80;++_){var b=Math.floor(_/20),D=C(v,5)+O(b,g,m,y)+w+e[b]+f[_]>>>0;w=y,y=m,m=C(g,30)>>>0,g=v,v=D}n[0]=n[0]+v>>>0,n[1]=n[1]+g>>>0,n[2]=n[2]+m>>>0,n[3]=n[3]+y>>>0,n[4]=n[4]+w>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]})),I="00000000-0000-0000-0000-000000000000";var S=function(t){if(!s(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}n.r(e);var o=r((function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.selectors=n})),s=[new o("adsense",["ins[id^='aswift_'] > iframe"]),new o("dfp",["iframe[id^='google_ads_iframe_']"]),new o("outbrain",[".OUTBRAIN > .ob-widget"]),new o("taboola",["div[id^='taboola-'] > .trc_rbox_container"]),new o("zergnet",["div[id^='zergnet-widget-']","div.zergnet-widget"]),new o("sovrn",["div.sovrn-onetag-ad"]),new o("content.ad",["div[id^='ac_'] > .ac_adbox"]),new o("media net",["iframe[id^='_mN_main_']","iframe[id^='_mN_dy_']"]),new o("tynt",["div.tynt-ad-container"]),new o("my6",["div[class*='my6_widget']"]),new o("spot.im",["div[data-spotim-module='recirculation']"]),new o("proper media",["iframe[id^='proper-ad-']"]),new o("revcontent",["div.rc-wc.rc-bp"]),new o("mgid",["div[class^='mgid-ad-']"]),new o("amazon native",["div[id^='amzn-native-ad-']"]),new o("spotx",["div[id^='spotx_content_container']"]),new o("ligatus",["div[id^='ligatusframe']"]),new o("adhese",["div[id^='adheseVisibleDiv']"]),new o("infolinks",["div.IL_BASE"]),new o("disqus",["div#disqus_thread > iframe[src*='disqusads']"]),new o("triplelift",["div.tlod > div"])];function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function u(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=u((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}));function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}c(h,"getDomain",(function(t){var e=document.createElement("a");return e.href=t,e.hostname})),c(h,"addClass",(function(t,e){t.classList?t.classList.add(e):a.className+=" ".concat(e)})),c(h,"getAbsolutePosition",(function(t){var e=t.getBoundingClientRect();return{x:Math.round(e.left+window.scrollX),y:Math.round(e.top+window.scrollY)}})),c(h,"attachEvent",(function(t,e,n){t.addEventListener?t.addEventListener(e,n):t.attachEvent&&t.attachEvent("on".concat(e),n)})),c(h,"isVisible",(function(t){return t.offsetWidth>0&&t.offsetHeight>0})),c(h,"isAncestorOfClass",(function(t,e){for(;t.parentNode&&"body"!==t.parentNode.tagName.toLowerCase()&&"html"!==t.parentNode.tagName.toLowerCase();)if((t=t.parentNode).className.indexOf(e)>0)return!0;return!1}));var l=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n}var e,n,i;return e=t,(n=[{key:"add",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"withinRect",value:function(t,e){if(this.equals(t)||this.equals(e))return!0;var n=Math.max(t.x,e.x),i=Math.max(t.y,e.y),a=Math.min(t.x,e.x),r=Math.min(t.y,e.y);return!(this.x>n||this.x<a||this.y>i|this.y<r)}},{key:"toString",value:function(){return"(".concat(this.x,", ").concat(this.y,")")}}])&&f(e.prototype,n),i&&f(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function p(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var m=n(0);(new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.adElements=[],this.pageviewData={},this.impressionData={},this.adsFound=0,this.headerHeight=0,this.footerHeight=0,this.adCoordinates={},this.lastRecordedDensityData={},this.DEBUG=!1,this.pageWidth=Math.max(document.body.scrollWidth,document.body.offsetWidth,document.documentElement.clientWidth,document.documentElement.scrollWidth,document.documentElement.offsetWidth),this.pageHeight=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight),"undefined"==typeof ezoTemplate?this.platformID=3:ezoTemplate.indexOf("orig_site")>=0||ezoTemplate.indexOf("old_site")>=0?this.platformID=2:this.platformID=1}var e,n,i;return e=t,i=[{key:"_fireData",value:function(t,e){(new Image).src=t+"?d="+encodeURIComponent(JSON.stringify(e))}},{key:"getPixelURL",value:function(t){return("undefined"==typeof ezoTemplate||"undefined"!=typeof ezJsu&&1==ezJsu||"undefined"!=typeof _ez_sa&&1==_ez_sa||"undefined"!=typeof isAmp&&!0===isAmp||"undefined"!=typeof ezWp&&!0===ezWp)&&(t="//g.ezoic.net"+t),t}},{key:"_setEzaqData",value:function(t){t.pageview_id=_ezaq.page_view_id,t.domain=h.getDomain(_ezaq.url),t.url=_ezaq.url,t.form_factor_id=_ezaq.form_factor_id}},{key:"iOSSafari",value:function(){if("undefined"==typeof window||void 0===window.navigator||void 0===window.navigator.userAgent)return!1;var t=window.navigator.userAgent,e=!!t.match(/iPad/i)||!!t.match(/iPhone/i),n=!!t.match(/WebKit/i);return e&&n&&!t.match(/CriOS/i)}}],(n=[{key:"run",value:function(){this._attachEvents()}},{key:"_run",value:function(){this._log("Running ad density"),this._findAds(),this._gatherData(),this._fire()}},{key:"_attachEvents",value:function(){var t=this;"complete"===document.readyState?this._run():h.attachEvent(document,"readystatechange",(function(){"complete"===document.readyState&&t._run()})),h.attachEvent(document,"blur",this._run.bind(this)),h.attachEvent(document,"unload",this._run.bind(this)),h.attachEvent(document,"pagehide",this._run.bind(this)),h.attachEvent(window,"blur",this._run.bind(this)),h.attachEvent(window,"unload",this._run.bind(this)),h.attachEvent(window,"pagehide",this._run.bind(this))}},{key:"_findAds",value:function(){var t=this;s.forEach((function(e){e.selectors.forEach((function(n){var i,a=document.querySelectorAll(n);a.forEach((function(n){t._handleFoundAd(n,e.name)})),(i=t.adElements).push.apply(i,p(a))}))})),this._log("Have found ".concat(this.adsFound," ads"))}},{key:"_handleFoundAd",value:function(t,e){var n="ezdensity-".concat(this.adsFound),i=h.getAbsolutePosition(t),a=new l(i.x,i.y),r=a.toString();if(!(t.className.indexOf("ezdensity")>=0||this.adCoordinates.hasOwnProperty(r))&&!(i.x<0||i.x>this.pageWidth||i.y<0||i.x>this.pageHeight)&&h.isVisible(t)){var o=window.getComputedStyle(t);if("none"!==o.display){for(var s=Math.round(parseFloat(o.width)),d=Math.round(parseFloat(o.height)),u=new l(s,d),c=a.add(u),f=0,p=Object.keys(this.adCoordinates);f<p.length;f++){var v=p[f],g=this.adCoordinates[v];if(a.withinRect(g.topLeft,g.bottomRight))return}h.isAncestorOfClass(t,"ezdensity")||(h.addClass(t,n),this._log("Found new ad ".concat(n," at pos ").concat(r," with size ").concat(s,"x").concat(d)),this._log(t),this.impressionData[n]={ad_network:e,ad_width:s,ad_height:d,pos_x:i.x,pos_y:i.y},this.adCoordinates[n]={topLeft:a,bottomRight:c},this.DEBUG&&(t.style.border="",t.style.borderStyle="groove",t.style.borderWidth="8px",t.style.borderColor="#5fa624"),this.adsFound++)}}}},{key:"_gatherData",value:function(){this._gatherPageviewData(),this._calculateDensity()}},{key:"_gatherPageviewData",value:function(){Object.keys(this.pageviewData)>0||(this.pageviewData.platform_id=this.platformID,this._setPageviewData(this.pageviewData))}},{key:"_setPageviewData",value:function(e){e.platform_id=this.platformID,1===this.platformID||2===this.platformID?t._setEzaqData(e):(this.pageviewData.hasOwnProperty("pageview_id")?e.pageview_id=this.pageviewData.pageview_id:e.pageview_id=m(),this.pageviewData.hasOwnProperty("domain")?e.domain=this.pageviewData.domain:e.domain=h.getDomain(window.location),this.pageviewData.hasOwnProperty("url")?e.url=this.pageviewData.url:e.url=window.location.protocol+"//"+window.location.hostname+window.location.pathname)}},{key:"_isPageviewDataDirty",value:function(){for(var t in this.pageviewData)if(this.pageviewData[t]!==this.lastRecordedDensityData[t])return!0;return!1}},{key:"_savePageviewDataCheckpoint",value:function(){this.lastRecordedDensityData=Object.assign({},this.pageviewData)}},{key:"_fire",value:function(){var e=this;this._isPageviewDataDirty()&&(this._savePageviewDataCheckpoint(),this._log("Firing pageview data with pixel count ".concat(this.pageviewData.pixel_count," and an ad density of ").concat(this.pageviewData.ad_density)),t._fireData(t.getPixelURL("/detroitchicago/dpv.gif"),this.pageviewData));var n={data:[]};Object.keys(this.impressionData).forEach((function(t){e.impressionData[t].fired||(e._log("Adding imp data for ".concat(t)),n.data.push(e.impressionData[t]))})),n.data.length>0&&(this._setPageviewData(n),this._log("Firing imp data"),t._fireData(t.getPixelURL("/detroitchicago/dimp.gif"),n),Object.keys(this.impressionData).forEach((function(t){e.impressionData[t].fired=!0})))}},{key:"_calculateDensity",value:function(){var t=this,e=Math.max(document.body.scrollWidth,document.body.offsetWidth,document.documentElement.clientWidth,document.documentElement.scrollWidth,document.documentElement.offsetWidth);e!==this.pageWidth&&(this.pageWidth=e);var n=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight);n!==this.pageHeight&&(this.pageHeight=n);var i=Math.round(e*n);this._log("Running on page with width ".concat(e," height ").concat(n," with ").concat(i," total pixels"));var a=0;Object.keys(this.impressionData).forEach((function(e){a+=t.impressionData[e].ad_width*t.impressionData[e].ad_height}));var r=this.getMergedAdsHeight();this.headerHeight=window.innerHeight/2,this.footerHeight=window.innerHeight/2;var o=n-(this.headerHeight+this.footerHeight);this.pageviewData.page_pixel_height=o,this.pageviewData.ad_pixel_height=r,this.pageviewData.ad_density_height=100*r/o,this.pageviewData.page_pixel_count=i,this.pageviewData.ad_pixel_count=a,this.pageviewData.ad_density=100*a/i,this._log("Page has an ad density of ".concat(this.pageviewData.ad_density))}},{key:"getMergedAdsHeight",value:function(){var t=0,e=0,n=[],i=this.headerHeight,a=this.pageHeight-this.footerHeight;for(var r in this.impressionData){var o=this.impressionData[r],s=Math.max(o.pos_y,i),d=Math.min(o.pos_y+o.ad_height,a);if(!(d<=i||s>=a||s>=d)){var u={entered:!1};n.push({y:s,edgeState:u}),n.push({y:d,edgeState:u})}}n.sort((function(t,e){return t.y-e.y}));for(var c=0,h=0,f=n;h<f.length;h++){var l=f[h];0==c&&(e=l.y),l.edgeState.entered?c--:(l.edgeState.entered=!0,c++),0==c&&(t+=l.y-e)}return t}},{key:"_log",value:function(t){this.DEBUG&&console.log("[Ezoic Ad Density]",t)}}])&&g(e.prototype,n),i&&g(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}())).run()}]);